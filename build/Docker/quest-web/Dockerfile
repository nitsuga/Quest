## use the Docker publish profile then build the image E:/Quest/Quest.Mobile
## credit to this article
## used https://medium.com/@shrimpy/configure-apache2-mod-mono-to-run-asp-net-mvc5-application-on-ubuntu-14-04-314a700522b9
## in addition, the view/web.config/system.web.webPages.razor/host dll version MUST be correct
FROM mono:latest
MAINTAINER GluteusMaximus
RUN \
	apt-get update &&  \
	apt-get -y install apache2 &&  \
	apt-get -y install mono-complete && \
	apt-get -y install libapache2-mod-mono mono-apache-server4

RUN \
	apt-get update && \
	apt-get -y install vim
	
# generated by http://go-mono.com/config-mod-mono/Default.aspx
ADD	publish/Quest.conf /etc/apache2/sites-available

RUN a2ensite Quest.conf
RUN a2enmod mod_mono
RUN mkdir /etc/mono/registry && chmod uog+rw /etc/mono/registry

ADD	publish /var/www/Quest
RUN chown -R www-data:www-data /var/www

RUN service apache2 restart

# the command is set in the docker-compose file, leaving it blank here lets use just enter the command
# shell and then run  service apache2 restart to kick it off
#CMD ["service apache2 restart"]
# or
#CMD ["/usr/sbin/apache2ctl", "-D", "FOREGROUND"]

